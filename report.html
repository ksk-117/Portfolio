<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>Report</title>
    <link rel="stylesheet" href="style_report.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <!--スムーズなスクロール-->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
          anchor.addEventListener('click', e => {
            e.preventDefault();
            const target = document.querySelector(anchor.getAttribute('href'));
            if (target) {
              target.scrollIntoView({ behavior: 'smooth' });
            }
          });
        });
      });
    </script>
  </head>

  <body>  
  

    <!-- ヘッダー -->
    <header class="header ">
      <div class="container">
        <h1 class="header-icon"><a href=".">My Portfolio</a></h1>
        <nav class="index">
            <a href="index.html#about">ABOUT</a>
            <a href="index.html#works">WORKS</a>
            <a href="index.html#report">REPORT</a>
            <a href="index.html#skill">SKILL</a>
            <a href="index.html#contact">CONTACT</a>
        </nav>
      </div>
    </header> 

    <!-- 本文 -->
    <h2 id="js">　"Canvas API"の基本と使い方 (2024.7~8)</h2>
    <h3>Canvas APIとは</h3>
    <p>Canvas APIとは、JavaScriptとHTMLの"canvas"要素を使ってグラフィックを描画するためのAPIである。<br>
      アニメーション、ゲームのグラフィック、データの可視化、写真加工、リアルタイム動画処理など、さまざまな用途に利用できる。<br>
      "Canvas API"の利点や特徴は以下の通りである。</p>
    <ul>
      <li>HTML5の一部であるため、ブラウザによる互換性が高い</li>
      <li>JavaScriptを使って描画するため、動的な描画が可能</li>
      <li>以下に記述するようなコードをhtml内に記述することで、簡単に描画が可能</li>
      <li>豊富な描画機能を持つため、さまざまなグラフィックを描画できる</li>
      <li>etc...</li>
    </ul>
    <p>ここでは、Canvas APIの基本的な使い方をこのページ上で実装しながら紹介する。<br>以下の流れで紹介する。<br></p>
    <ol class="big"><strong>
      <li><a href="#js01">四角形の描画</a></li>
      <li><a href="#js02">曲線の描画</a></li>
      <li><a href="#js03">三角関数を用いた円運動のアニメーション</a></li>
      <li><a href="#js04">線形変換を用いた回転</a></li>
      <li><a href="#js05">画像のピクセル操作</a></li>
    </strong></ol><br>
    
    <img src="logo.png">

    <h3 id="js01">1. 四角形の描画</h3>
    <p>まずは、Canvas上に四角形を描画する。以下のコードをHTMLファイルに記述する。</p>
    <pre>
      <code>
        &lt;canvas id="canvas" width="200" height="200"&gt;&lt;/canvas&gt;
        &lt;script&gt;
          const canvas = document.getElementById('canvas');
          const ctx = canvas.getContext('2d');
          ctx.fillStyle = 'yellow';
          ctx.fillRect(50, 50, 100, 100);
        &lt;/script&gt;
      </code>
    </pre>
    <ul>
      <li>200*200のcanvas要素を作成する</li>
      <li>canvas要素を取得し、getContext('2d')メソッドで2D描画コンテキストを取得する</li>
      <li>fillStyleプロパティで塗りつぶしの色を指定する</li>
      <li>fillRectメソッドで四角形を描画する</li>
    </ul>
    <p>このコードを実行すると、Canvas上に黄色い四角形が描画される。<br>
      ↓↓実行結果↓↓</p>

    <canvas id="canvas" width="200" height="200">
      <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = 'yellow';
        ctx.fillRect(50, 50, 100, 100);
      </script>
    </canvas>

    <h3 id="js02">2. 曲線の描画</h3>
    <p>次に、Canvas上に曲線を描画する。以下のコードをHTMLファイルに記述する。</p>
    <pre>
      <code>
        &lt;canvas id="canvas" width="200" height="120"&gt;&lt;/canvas&gt;
        &lt;script&gt;
          const canvas = document.getElementById('canvas');
          const ctx = canvas.getContext('2d');
          ctx.beginPath();
          ctx.moveTo(0, 80);
          ctx.bezierCurveTo(40, -50, 80, 100, 200, 0);
          ctx.arcTo(150, 60, 180, 80, 10);
          ctx.lineTo(180, 80);
          ctx.closePath();
          ctx.fillStyle   = "#ddf";
          ctx.strokeStyle = "#00f";
          ctx.fill();
          ctx.stroke();
        &lt;/script&gt;
      </code>
    </pre>
    <ul>
      <li>200*120のcanvas要素を作成する</li>
      <li>canvas要素を取得し、getContext('2d')メソッドで2D描画コンテキストを取得する</li>
      <li>beginPathメソッドでパスを開始する</li>
      <li>moveToメソッドで始点を指定する</li>
      <li>bezierCurveToメソッドでベジェ曲線を描画する</li>
      <li>arcToメソッドで円弧を描画する</li>
      <li>lineToメソッドで直線を描画する</li>
      <li>closePathメソッドでパスを閉じる</li>
      <li>fillStyleプロパティで塗りつぶしの色を指定する</li>
      <li>strokeStyleプロパティで線の色を指定する</li>
      <li>fillメソッドで塗りつぶしを行う</li>
      <li>strokeメソッドで線を描画する</li>
    </ul>
    <p>↓↓実行結果↓↓</p>
    <canvas id="canvas2" width="200" height="120">
      <script>
        const canvas2 = document.getElementById('canvas2');
        const ctx2 = canvas2.getContext('2d');
        ctx2.beginPath();
        ctx2.moveTo(0, 80);
        ctx2.bezierCurveTo(40, -50, 80, 100, 200, 0);
        ctx2.arcTo(150, 60, 180, 80, 10);
        ctx2.lineTo(180, 80);
        ctx2.closePath();
        ctx2.fillStyle   = "#ddf";
        ctx2.strokeStyle = "#00f";
        ctx2.fill();
        ctx2.stroke();
      </script>
    </canvas>

    <h3 id="js03">3. 三角関数を用いた円運動のアニメーション</h3>
    <p>次に、Canvas上に三角関数を用いたアニメーションを描画する。以下のコードをHTMLファイルに記述する。</p>
    <pre>
      <code>
        &lt;canvas id="canvas" width="300" height="300"&gt;&lt;/canvas&gt;
        &lt;script&gt;
          const canvas = document.getElementById('canvas');
          const ctx = canvas.getContext('2d');
          let angle = 0;
          setInterval(() => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.beginPath();
            ctx.arc(150 + 100 * Math.cos(angle), 150 + 100 * Math.sin(angle), 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.fillStyle = 'white';
            angle += 0.1;
          }, 1000 / 60);
        &lt;/script&gt;
      </code>
    </pre>
    <ul>
      <li>300*300のcanvas要素を作成する</li>
      <li>canvas要素を取得し、getContext('2d')メソッドで2D描画コンテキストを取得する</li>
      <li>angle変数を定義し、0で初期化する</li>
      <li>setInterval関数でアニメーションを行う</li>
      <li>clearRectメソッドでCanvasをクリアする</li>
      <li>beginPathメソッドでパスを開始する</li>
      <li>arcメソッドで円を描画する</li>
      <li>fillメソッドで塗りつぶしを行う</li>
      <li>fillStyleプロパティで塗りつぶしの色を指定する</li>
      <li>angleを更新する</li>
    </ul>
    <p>このコードを実行すると、Canvas上に円運動を行う白い点が描画される。<br>
      ↓↓実行結果↓↓</p>

    <canvas id="canvas3" width="300" height="300">
      <script>
        const canvas3 = document.getElementById('canvas3');
        const ctx3 = canvas3.getContext('2d');
        let angle = 0;
        setInterval(() => {
          ctx3.clearRect(0, 0, canvas3.width, canvas3.height);
          ctx3.beginPath();
          ctx3.arc(150 + 100 * Math.cos(angle), 150 + 100 * Math.sin(angle), 10, 0, 2 * Math.PI);
          ctx3.fill();
          ctx3.fillStyle = 'white';
          angle += 0.1;
        }, 1000 / 60);
      </script>
    </canvas>

    <h3 id="js04">4. 線形変換を用いた回転</h3>
    <p>次に、Canvas上に線形変換を用いて回転を描画する。以下のコードをHTMLファイルに記述する。</p>
    <pre>
      <code>
        &lt;canvas id="canvas" width="400" height="400"&gt;&lt;/canvas&gt;
        &lt;script&gt;
          const canvas = document.getElementById('canvas');
          const ctx = canvas.getContext('2d');
          let angle = 0;
          setInterval(() => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.save();
            ctx.translate(200, 200);
            ctx.rotate(angle);
            ctx.fillStyle = 'blue';
            ctx.fillRect(-50, -50, 100, 100);
            ctx.restore();
            angle += 0.1;
          }, 1000 / 60);
        &lt;/script&gt;
      </code>
    </pre>
    <ul>
      <li>400*400のcanvas要素を作成する</li>
      <li>canvas要素を取得し、getContext('2d')メソッドで2D描画コンテキストを取得する</li>
      <li>angle変数を定義し、0で初期化する</li>
      <li>setInterval関数でアニメーションを行う</li>
      <li>clearRectメソッドでCanvasをクリアする</li>
      <li>saveメソッドで現在の描画状態を保存する</li>
      <li>translateメソッドで座標系を移動する</li>
      <li>rotateメソッドで回転する</li>
      <li>fillStyleプロパティで塗りつぶしの色を指定する</li>
      <li>fillRectメソッドで四角形を描画する</li>
      <li>restoreメソッドで描画状態を復元する</li>
      <li>angleを更新する</li>
    </ul>
    <p>このコードを実行すると、Canvas上に回転する四角形が描画される。<br>
      ↓↓実行結果↓↓</p>

    <canvas id="canvas4" width="200" height="200">
      <script>
        const canvas4 = document.getElementById('canvas4');
        const ctx4 = canvas4.getContext('2d');
        let angle4 = 0;
        setInterval(() => {
          ctx4.clearRect(0, 0, canvas4.width, canvas4.height);
          ctx4.save();
          ctx4.translate(100, 100);
          ctx4.rotate(angle4);
          ctx4.fillStyle = 'blue';
          ctx4.fillRect(-50, -50, 100, 100);
          ctx4.restore();
          angle4 += 0.1;
        }, 1000 / 60);
      </script>
    </canvas>

    <h3 id="js05">5. 画像のピクセル操作</h3>
    <p>最後に、Canvas上に画像を描画し、ピクセル操作を行う。以下のコードをHTMLファイルに記述する。</p>
    <pre>
      <code>
        &lt;canvas id="canvas" width="400" height="400"&gt;&lt;/canvas&gt;
        &lt;script&gt;
          const canvas = document.getElementById('canvas');
          const ctx = canvas.getContext('2d');
          const img = new Image();
          img.src = 'image.jpg';
          img.onload = () => {
            ctx.drawImage(img, 0, 0);
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            for (let i = 0; i < data.length; i += 4) {
              const r = data[i];
              const g = data[i + 1];
              const b = data[i + 2];
              const a = data[i + 3];
              data[i] = 255 - r;
              data[i + 1] = 255 - g;
              data[i + 2] = 255 - b;
            }
            ctx.putImageData(imageData, 0, 0);
          };
        &lt;/script&gt;
      </code>
    </pre>
    <ul>
      <li>400*400のcanvas要素を作成する</li>
      <li>canvas要素を取得し、getContext('2d')メソッドで2D描画コンテキストを取得する</li>
      <li>Imageオブジェクトを作成し、画像を読み込む</li>
      <li>画像の読み込みが完了したら、drawImageメソッドで画像を描画する</li>
      <li>getImageDataメソッドで画像のピクセルデータを取得する</li>
      <li>ピクセルデータを取得し、色を反転させる</li>
      <li>putImageDataメソッドで画像を描画する</li>
    </ul>
    <p>このコードを実行すると、Canvas上に画像が描画され、色が反転される。<br>
      ↓↓実行結果↓↓</p>
    <img src="sample.png"  class="right">
    <canvas id="canvas5" width="400" height="400">
      <script>
        const canvas5 = document.getElementById('canvas5');
        const ctx5 = canvas5.getContext('2d');
        const img5 = new Image();
        img5.src = 'sample.png';
        img5.onload = () => {
          ctx5.drawImage(img5, 0, 0);
          const imageData5 = ctx5.getImageData(0, 0, canvas5.width, canvas5.height);
          const data5 = imageData5.data;
          for (let i = 0; i < data5.length; i += 4) {
            const r = data5[i];
            const g = data5[i + 1];
            const b = data5[i + 2];
            const a = data5[i + 3];
            data5[i] = 255 - r;
            data5[i + 1] = 255 - g;
            data5[i + 2] = 255 - b;
          }
          ctx5.putImageData(imageData5, 0, 0);
        };
      </script>
    </canvas>

    <p><strong>本コンテンツの作成時間（HTML/CSS/JavaScriptの設計・実装を含む）: 約17時間</strong></p><br>
    <footer class="footer"></footer>
  </body>
</html>